<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Computes R2 score. — metric_r2_score • keras</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Computes R2 score. — metric_r2_score"><meta property="og:description" content='Formula:
sum_squares_residuals = sum((y_true - y_pred) ** 2)
sum_squares = sum((y_true - mean(y_true)) ** 2)
R2 = 1 - sum_squares_residuals / sum_squares

This is also called the
coefficient of determination.
It indicates how close the fitted regression line
is to ground-truth data.
The highest score possible is 1.0. It indicates that the predictors
perfectly accounts for variation in the target.
A score of 0.0 indicates that the predictors do not
account for variation in the target.
It can also be negative if the model is worse than random.


This metric can also compute the "Adjusted R2" score.'><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">keras</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.13.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_classification.html">Basic Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_text_classification.html">Text Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_regression.html">Basic Regression</a>
    </li>
    <li>
      <a href="../articles/tutorial_overfit_underfit.html">Overfitting and Underfitting</a>
    </li>
    <li>
      <a href="../articles/tutorial_save_and_restore.html">Save and Restore Models</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Guides (New for TF 2.6)</li>
    <li>
      <a href="../articles/new-guides/python_subclasses.html">Python Subclasses</a>
    </li>
    <li>
      <a href="../articles/new-guides/making_new_layers_and_models_via_subclassing.html">Making New Layers and Models via Subclassing</a>
    </li>
    <li>
      <a href="../articles/new-guides/customizing_what_happens_in_fit.html">Customizing What Happens in Fit</a>
    </li>
    <li>
      <a href="../articles/new-guides/writing_your_own_callbacks.html">Writing Your Own Callbacks</a>
    </li>
    <li>
      <a href="../articles/new-guides/preprocessing_layers.html">Working with Preprocessing Layers</a>
    </li>
    <li>
      <a href="../argicles/new-guides/working_with_rnns.html">Working with RNNs</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Using Keras</li>
    <li>
      <a href="../articles/guide_keras.html">Guide to Keras Basics</a>
    </li>
    <li>
      <a href="../articles/sequential_model.html">Sequential Model in Depth</a>
    </li>
    <li>
      <a href="../articles/functional_api.html">Functional API in Depth</a>
    </li>
    <li>
      <a href="../articles/about_keras_models.html">About Keras Models</a>
    </li>
    <li>
      <a href="../articles/about_keras_layers.html">About Keras Layers</a>
    </li>
    <li>
      <a href="../articles/training_visualization.html">Training Visualization</a>
    </li>
    <li>
      <a href="../articles/applications.html">Pre-Trained Models</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/why_use_keras.html">Why Use Keras?</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/eager_guide.html">Eager Execution</a>
    </li>
    <li>
      <a href="../articles/training_callbacks.html">Training Callbacks</a>
    </li>
    <li>
      <a href="../articles/backend.html">Keras Backend</a>
    </li>
    <li>
      <a href="../articles/custom_layers.html">Custom Layers</a>
    </li>
    <li>
      <a href="../articles/custom_models.html">Custom Models</a>
    </li>
    <li>
      <a href="../articles/saving_serializing.html">Saving and serializing</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/learn.html">Learn</a>
</li>
<li>
  <a href="../articles/tools.html">Tools</a>
</li>
<li>
  <a href="../articles/examples/index.html">Examples</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rstudio/keras/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes R2 score.</h1>
    <small class="dont-index">Source: <a href="https://github.com/rstudio/keras/blob/HEAD/R/autogen-metrics.R" class="external-link"><code>R/autogen-metrics.R</code></a></small>
    <div class="hidden name"><code>metric_r2_score.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Formula:</p>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>sum_squares_residuals <span class="op">=</span> <span class="bu">sum</span>((y_true <span class="op">-</span> y_pred) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>sum_squares <span class="op">=</span> <span class="bu">sum</span>((y_true <span class="op">-</span> mean(y_true)) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>R2 <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> sum_squares_residuals <span class="op">/</span> sum_squares</span></code></pre><p></p></div>
<p>This is also called the
<a href="https://en.wikipedia.org/wiki/Coefficient_of_determination" class="external-link">coefficient of determination</a>.</p>
<p>It indicates how close the fitted regression line
is to ground-truth data.</p><ul><li><p>The highest score possible is 1.0. It indicates that the predictors
perfectly accounts for variation in the target.</p></li>
<li><p>A score of 0.0 indicates that the predictors do not
account for variation in the target.</p></li>
<li><p>It can also be negative if the model is worse than random.</p></li>
</ul><p>This metric can also compute the "Adjusted R2" score.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">metric_r2_score</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  class_aggregation <span class="op">=</span> <span class="st">"uniform_average"</span>,</span>
<span>  num_regressors <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"r2_score"</span>,</span>
<span>  dtype <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>Passed on to the Python callable</p></dd>


<dt>class_aggregation</dt>
<dd><p>Specifies how to aggregate scores corresponding to
different output classes (or target dimensions),
i.e. different dimensions on the last axis of the predictions.
Equivalent to <code>multioutput</code> argument in Scikit-Learn.
Should be one of
<code>None</code> (no aggregation), <code>"uniform_average"</code>,
<code>"variance_weighted_average"</code>.</p></dd>


<dt>num_regressors</dt>
<dd><p>Number of independent regressors used
("Adjusted R2" score). 0 is the standard R2 score.
Defaults to <code>0</code>.</p></dd>


<dt>name</dt>
<dd><p>Optional. string name of the metric instance.</p></dd>


<dt>dtype</dt>
<dd><p>Optional. data type of the metric result.</p></dd>

</dl></div>
    <div id="examples">
    <h2>Examples</h2>
    <p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>y_true <span class="op">=</span> np.array([[<span class="dv">1</span>], [<span class="dv">4</span>], [<span class="dv">3</span>]], dtype<span class="op">=</span>np.float32)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>y_pred <span class="op">=</span> np.array([[<span class="dv">2</span>], [<span class="dv">4</span>], [<span class="dv">4</span>]], dtype<span class="op">=</span>np.float32)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>metric <span class="op">=</span> keras.metrics.R2Score()</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>metric.update_state(y_true, y_pred)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>result <span class="op">=</span> metric.result()</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>result</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># 0.57142854</span></span></code></pre><p></p></div>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><a href="https://www.tensorflow.org/api_docs/python/tf/keras/metrics/R2Score" class="external-link">https://www.tensorflow.org/api_docs/python/tf/keras/metrics/R2Score</a></p></li>
</ul><p>Other metric: 
<code><a href="metric_auc.html">metric_auc</a>()</code>,
<code><a href="metric_binary_accuracy.html">metric_binary_accuracy</a>()</code>,
<code><a href="metric_binary_crossentropy.html">metric_binary_crossentropy</a>()</code>,
<code><a href="metric_binary_iou.html">metric_binary_iou</a>()</code>,
<code><a href="metric_categorical_accuracy.html">metric_categorical_accuracy</a>()</code>,
<code><a href="metric_categorical_crossentropy.html">metric_categorical_crossentropy</a>()</code>,
<code><a href="metric_categorical_hinge.html">metric_categorical_hinge</a>()</code>,
<code><a href="metric_cosine_similarity.html">metric_cosine_similarity</a>()</code>,
<code><a href="metric_f1_score.html">metric_f1_score</a>()</code>,
<code><a href="metric_false_negatives.html">metric_false_negatives</a>()</code>,
<code><a href="metric_false_positives.html">metric_false_positives</a>()</code>,
<code><a href="metric_fbeta_score.html">metric_fbeta_score</a>()</code>,
<code><a href="metric_hinge.html">metric_hinge</a>()</code>,
<code><a href="metric_iou.html">metric_iou</a>()</code>,
<code><a href="metric_kl_divergence.html">metric_kl_divergence</a>()</code>,
<code><a href="metric_log_cosh_error.html">metric_log_cosh_error</a>()</code>,
<code><a href="metric_mean_absolute_error.html">metric_mean_absolute_error</a>()</code>,
<code><a href="metric_mean_absolute_percentage_error.html">metric_mean_absolute_percentage_error</a>()</code>,
<code><a href="metric_mean_iou.html">metric_mean_iou</a>()</code>,
<code><a href="metric_mean_squared_error.html">metric_mean_squared_error</a>()</code>,
<code><a href="metric_mean_squared_logarithmic_error.html">metric_mean_squared_logarithmic_error</a>()</code>,
<code><a href="metric_mean_wrapper.html">metric_mean_wrapper</a>()</code>,
<code><a href="metric_mean.html">metric_mean</a>()</code>,
<code><a href="metric_one_hot_iou.html">metric_one_hot_iou</a>()</code>,
<code><a href="metric_one_hot_mean_iou.html">metric_one_hot_mean_iou</a>()</code>,
<code><a href="metric_poisson.html">metric_poisson</a>()</code>,
<code><a href="metric_precision_at_recall.html">metric_precision_at_recall</a>()</code>,
<code><a href="metric_precision.html">metric_precision</a>()</code>,
<code><a href="metric_recall_at_precision.html">metric_recall_at_precision</a>()</code>,
<code><a href="metric_recall.html">metric_recall</a>()</code>,
<code><a href="metric_root_mean_squared_error.html">metric_root_mean_squared_error</a>()</code>,
<code><a href="metric_sensitivity_at_specificity.html">metric_sensitivity_at_specificity</a>()</code>,
<code><a href="metric_sparse_categorical_accuracy.html">metric_sparse_categorical_accuracy</a>()</code>,
<code><a href="metric_sparse_categorical_crossentropy.html">metric_sparse_categorical_crossentropy</a>()</code>,
<code><a href="metric_sparse_top_k_categorical_accuracy.html">metric_sparse_top_k_categorical_accuracy</a>()</code>,
<code><a href="metric_specificity_at_sensitivity.html">metric_specificity_at_sensitivity</a>()</code>,
<code><a href="metric_squared_hinge.html">metric_squared_hinge</a>()</code>,
<code><a href="metric_sum.html">metric_sum</a>()</code>,
<code><a href="metric_top_k_categorical_accuracy.html">metric_top_k_categorical_accuracy</a>()</code>,
<code><a href="metric_true_negatives.html">metric_true_negatives</a>()</code>,
<code><a href="metric_true_positives.html">metric_true_positives</a>()</code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tomasz Kalinowski, JJ Allaire, François Chollet, RStudio, Google.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

