<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A preprocessing layer which maps integer features to contiguous ranges. — layer_integer_lookup • keras</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="A preprocessing layer which maps integer features to contiguous ranges. — layer_integer_lookup"><meta property="og:description" content="A preprocessing layer which maps integer features to contiguous ranges."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">keras</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.8.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_classification.html">Basic Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_text_classification.html">Text Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_regression.html">Basic Regression</a>
    </li>
    <li>
      <a href="../articles/tutorial_overfit_underfit.html">Overfitting and Underfitting</a>
    </li>
    <li>
      <a href="../articles/tutorial_save_and_restore.html">Save and Restore Models</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Guides (New for TF 2.6)</li>
    <li>
      <a href="../articles/new-guides/python_subclasses.html">Python Subclasses</a>
    </li>
    <li>
      <a href="../articles/new-guides/making_new_layers_and_models_via_subclassing.html">Making New Layers and Models via Subclassing</a>
    </li>
    <li>
      <a href="../articles/new-guides/customizing_what_happens_in_fit.html">Customizing What Happens in Fit</a>
    </li>
    <li>
      <a href="../articles/new-guides/writing_your_own_callbacks.html">Writing Your Own Callbacks</a>
    </li>
    <li>
      <a href="../articles/new-guides/preprocessing_layers.html">Working with Preprocessing Layers</a>
    </li>
    <li>
      <a href="../argicles/new-guides/working_with_rnns.html">Working with RNNs</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Using Keras</li>
    <li>
      <a href="../articles/guide_keras.html">Guide to Keras Basics</a>
    </li>
    <li>
      <a href="../articles/sequential_model.html">Sequential Model in Depth</a>
    </li>
    <li>
      <a href="../articles/functional_api.html">Functional API in Depth</a>
    </li>
    <li>
      <a href="../articles/about_keras_models.html">About Keras Models</a>
    </li>
    <li>
      <a href="../articles/about_keras_layers.html">About Keras Layers</a>
    </li>
    <li>
      <a href="../articles/training_visualization.html">Training Visualization</a>
    </li>
    <li>
      <a href="../articles/applications.html">Pre-Trained Models</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/why_use_keras.html">Why Use Keras?</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/eager_guide.html">Eager Execution</a>
    </li>
    <li>
      <a href="../articles/training_callbacks.html">Training Callbacks</a>
    </li>
    <li>
      <a href="../articles/backend.html">Keras Backend</a>
    </li>
    <li>
      <a href="../articles/custom_layers.html">Custom Layers</a>
    </li>
    <li>
      <a href="../articles/custom_models.html">Custom Models</a>
    </li>
    <li>
      <a href="../articles/saving_serializing.html">Saving and serializing</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/learn.html">Learn</a>
</li>
<li>
  <a href="../articles/tools.html">Tools</a>
</li>
<li>
  <a href="../articles/examples/index.html">Examples</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rstudio/keras/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A preprocessing layer which maps integer features to contiguous ranges.</h1>
    <small class="dont-index">Source: <a href="https://github.com/rstudio/keras/blob/HEAD/R/layers-preprocessing.R" class="external-link"><code>R/layers-preprocessing.R</code></a></small>
    <div class="hidden name"><code>layer_integer_lookup.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A preprocessing layer which maps integer features to contiguous ranges.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">layer_integer_lookup</span><span class="op">(</span>
  <span class="va">object</span>,
  max_tokens <span class="op">=</span> <span class="cn">NULL</span>,
  num_oov_indices <span class="op">=</span> <span class="fl">1L</span>,
  mask_token <span class="op">=</span> <span class="cn">NULL</span>,
  oov_token <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span>,
  vocabulary <span class="op">=</span> <span class="cn">NULL</span>,
  invert <span class="op">=</span> <span class="cn">FALSE</span>,
  output_mode <span class="op">=</span> <span class="st">"int"</span>,
  sparse <span class="op">=</span> <span class="cn">FALSE</span>,
  pad_to_max_tokens <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>What to compose the new <code>Layer</code> instance with. Typically a
Sequential model or a Tensor (e.g., as returned by <code><a href="layer_input.html">layer_input()</a></code>).
The return value depends on <code>object</code>. If <code>object</code> is:</p><ul><li><p>missing or <code>NULL</code>, the <code>Layer</code> instance is returned.</p></li>
<li><p>a <code>Sequential</code> model, the model with an additional layer is returned.</p></li>
<li><p>a Tensor, the output tensor from <code>layer_instance(object)</code> is returned.</p></li>
</ul></dd>
<dt>max_tokens</dt>
<dd><p>The maximum size of the vocabulary for this layer. If <code>NULL</code>,
there is no cap on the size of the vocabulary. Note that this size
includes the OOV and mask tokens. Default to <code>NULL.</code></p></dd>
<dt>num_oov_indices</dt>
<dd><p>The number of out-of-vocabulary tokens to use. If this
value is more than 1, OOV inputs are modulated to determine their OOV
value. If this value is 0, OOV inputs will cause an error when calling the
layer. Defaults to 1.</p></dd>
<dt>mask_token</dt>
<dd><p>An integer token that represents masked inputs. When
<code>output_mode</code> is <code>"int"</code>, the token is included in vocabulary and mapped
to index 0. In other output modes, the token will not appear in the
vocabulary and instances of the mask token in the input will be dropped.
If set to <code>NULL</code>, no mask term will be added. Defaults to <code>NULL</code>.</p></dd>
<dt>oov_token</dt>
<dd><p>Only used when <code>invert</code> is <code>TRUE.</code> The token to return for OOV
indices. Defaults to -1.</p></dd>
<dt>vocabulary</dt>
<dd><p>Optional. Either an array of integers or a string path to a text
file. If passing an array, can pass a list, list, 1D numpy array, or 1D
tensor containing the integer vocabulary terms. If passing a file path, the
file should contain one line per term in the vocabulary. If this argument
is set, there is no need to <code>adapt</code> the layer.</p></dd>
<dt>invert</dt>
<dd><p>Only valid when <code>output_mode</code> is <code>"int"</code>. If <code>TRUE</code>, this layer will
map indices to vocabulary items instead of mapping vocabulary items to
indices. Default to <code>FALSE</code>.</p></dd>
<dt>output_mode</dt>
<dd><p>Specification for the output of the layer. Defaults to <code>"int"</code>.
Values can be <code>"int"</code>, <code>"one_hot"</code>, <code>"multi_hot"</code>, <code>"count"</code>, or
<code>"tf_idf"</code> configuring the layer as follows:</p><ul><li><p><code>"int"</code>: Return the vocabulary indices of the input tokens.</p></li>
<li><p><code>"one_hot"</code>: Encodes each individual element in the input into an
array the same size as the vocabulary, containing a 1 at the element
index. If the last dimension is size 1, will encode on that dimension.
If the last dimension is not size 1, will append a new dimension for
the encoded output.</p></li>
<li><p><code>"multi_hot"</code>: Encodes each sample in the input into a single array
the same size as the vocabulary, containing a 1 for each vocabulary
term present in the sample. Treats the last dimension as the sample
dimension, if input shape is (..., sample_length), output shape will
be (..., num_tokens).</p></li>
<li><p><code>"count"</code>: As <code>"multi_hot"</code>, but the int array contains a count of the
number of times the token at that index appeared in the sample.</p></li>
<li><p><code>"tf_idf"</code>: As <code>"multi_hot"</code>, but the TF-IDF algorithm is applied to
find the value in each token slot.
For <code>"int"</code> output, any shape of input and output is supported. For all
other output modes, currently only output up to rank 2 is supported.</p></li>
</ul></dd>
<dt>sparse</dt>
<dd><p>Boolean. Only applicable when <code>output_mode</code> is <code>"multi_hot"</code>,
<code>"count"</code>, or <code>"tf_idf"</code>. If <code>TRUE</code>, returns a <code>SparseTensor</code> instead of a
dense <code>Tensor</code>. Defaults to <code>FALSE</code>.</p></dd>
<dt>pad_to_max_tokens</dt>
<dd><p>Only applicable when <code>output_mode</code> is <code>"multi_hot"</code>,
<code>"count"</code>, or <code>"tf_idf"</code>. If TRUE, the output will have its feature axis
padded to <code>max_tokens</code> even if the number of unique tokens in the
vocabulary is less than max_tokens, resulting in a tensor of shape
<code>[batch_size, max_tokens]</code> regardless of vocabulary size. Defaults to <code>FALSE</code>.</p></dd>
<dt>...</dt>
<dd><p>standard layer arguments.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This layer maps a set of arbitrary integer input tokens into indexed
integer output via a table-based vocabulary lookup. The layer's output indices
will be contiguously arranged up to the maximum vocab size, even if the input
tokens are non-continguous or unbounded. The layer supports multiple options
for encoding the output via <code>output_mode</code>, and has optional support for
out-of-vocabulary (OOV) tokens and masking.</p>
<p>The vocabulary for the layer can be supplied on construction or learned via
<code><a href="adapt.html">adapt()</a></code>. During <code><a href="adapt.html">adapt()</a></code>, the layer will analyze a data set, determine the
frequency of individual integer tokens, and create a vocabulary from them. If
the vocabulary is capped in size, the most frequent tokens will be used to
create the vocabulary and all others will be treated as OOV.</p>
<p>There are two possible output modes for the layer.
When <code>output_mode</code> is <code>"int"</code>,
input integers are converted to their index in the vocabulary (an integer).
When <code>output_mode</code> is <code>"multi_hot"</code>, <code>"count"</code>, or <code>"tf_idf"</code>, input integers
are encoded into an array where each dimension corresponds to an element in
the vocabulary.</p>
<p>The vocabulary for the layer must be either supplied on construction or
learned via <code><a href="adapt.html">adapt()</a></code>. During <code><a href="adapt.html">adapt()</a></code>, the layer will analyze a data set,
determine the frequency of individual integer tokens, and create a vocabulary
from them. If the vocabulary is capped in size, the most frequent tokens will
be used to create the vocabulary and all others will be treated as OOV.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><code><a href="adapt.html">adapt()</a></code></p></li>
<li><p><a href="https://www.tensorflow.org/api_docs/python/tf/keras/layers/IntegerLookup" class="external-link">https://www.tensorflow.org/api_docs/python/tf/keras/layers/IntegerLookup</a></p></li>
<li><p><a href="https://keras.io/api/layers/preprocessing_layers/categorical/integer_lookup" class="external-link">https://keras.io/api/layers/preprocessing_layers/categorical/integer_lookup</a></p></li>
</ul><p>Other categorical features preprocessing layers: 
<code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code>,
<code><a href="layer_hashing.html">layer_hashing</a>()</code>,
<code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code></p>
<p>Other preprocessing layers: 
<code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code>,
<code><a href="layer_center_crop.html">layer_center_crop</a>()</code>,
<code><a href="layer_discretization.html">layer_discretization</a>()</code>,
<code><a href="layer_hashing.html">layer_hashing</a>()</code>,
<code><a href="layer_normalization.html">layer_normalization</a>()</code>,
<code><a href="layer_random_contrast.html">layer_random_contrast</a>()</code>,
<code><a href="layer_random_crop.html">layer_random_crop</a>()</code>,
<code><a href="layer_random_flip.html">layer_random_flip</a>()</code>,
<code><a href="layer_random_height.html">layer_random_height</a>()</code>,
<code><a href="layer_random_rotation.html">layer_random_rotation</a>()</code>,
<code><a href="layer_random_translation.html">layer_random_translation</a>()</code>,
<code><a href="layer_random_width.html">layer_random_width</a>()</code>,
<code><a href="layer_random_zoom.html">layer_random_zoom</a>()</code>,
<code><a href="layer_rescaling.html">layer_rescaling</a>()</code>,
<code><a href="layer_resizing.html">layer_resizing</a>()</code>,
<code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code>,
<code><a href="layer_text_vectorization.html">layer_text_vectorization</a>()</code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tomasz Kalinowski, JJ Allaire, François Chollet, RStudio, Google.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

