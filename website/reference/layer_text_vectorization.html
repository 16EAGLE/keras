<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This layer has basic options for managing text in a Keras model. It
transforms a batch of strings (one example = one string) into either a list
of token indices (one example = 1D tensor of integer token indices) or a
dense representation (one example = 1D tensor of float values representing
data about the example's tokens). This layer is meant to handle natural
language inputs. To handle simple string inputs (categorical strings or
pre-tokenized strings) see kers_core.layers.StringLookup.
The vocabulary for the layer must be either supplied on construction or
learned via adapt(). When this layer is adapted, it will analyze the
dataset, determine the frequency of individual string values, and create a
vocabulary from them. This vocabulary can have unlimited size or be capped,
depending on the configuration options for this layer; if there are more
unique values in the input than the maximum vocabulary size, the most
frequent terms will be used to create the vocabulary.
The processing of each example contains the following steps:
Standardize each example (usually lowercasing + punctuation stripping)
Split each example into substrings (usually words)
Recombine substrings into tokens (usually ngrams)
Index tokens (associate a unique int value with each token)
Transform each example using this index, either into a vector of ints or
a dense float vector.


Some notes on passing callables to customize splitting and normalization for
this layer:
Any callable can be passed to this Layer, but if you want to serialize
this object you should only pass functions that are registered Keras
serializables (see keras.saving.register_keras_serializable
for more details).
When using a custom callable for standardize, the data received
by the callable will be exactly as passed to this layer. The callable
should return a tensor of the same shape as the input.
When using a custom callable for split, the data received by the
callable will have the 1st dimension squeezed out - instead of
[[&quot;string to split&quot;], [&quot;another string to split&quot;]], the Callable will
see [&quot;string to split&quot;, &quot;another string to split&quot;].
The callable should return a tf.Tensor of dtype string
with the first dimension containing the split tokens -
in this example, we should see something like [[&quot;string&quot;, &quot;to&quot;, &quot;split&quot;], [&quot;another&quot;, &quot;string&quot;, &quot;to&quot;, &quot;split&quot;]].


Note: This layer uses TensorFlow internally. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.
Note: This layer is safe to use inside a tf.data pipeline
(independently of which backend you're using)."><title>A preprocessing layer which maps text features to integer sequences. — layer_text_vectorization • keras</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="A preprocessing layer which maps text features to integer sequences. — layer_text_vectorization"><meta property="og:description" content="This layer has basic options for managing text in a Keras model. It
transforms a batch of strings (one example = one string) into either a list
of token indices (one example = 1D tensor of integer token indices) or a
dense representation (one example = 1D tensor of float values representing
data about the example's tokens). This layer is meant to handle natural
language inputs. To handle simple string inputs (categorical strings or
pre-tokenized strings) see kers_core.layers.StringLookup.
The vocabulary for the layer must be either supplied on construction or
learned via adapt(). When this layer is adapted, it will analyze the
dataset, determine the frequency of individual string values, and create a
vocabulary from them. This vocabulary can have unlimited size or be capped,
depending on the configuration options for this layer; if there are more
unique values in the input than the maximum vocabulary size, the most
frequent terms will be used to create the vocabulary.
The processing of each example contains the following steps:
Standardize each example (usually lowercasing + punctuation stripping)
Split each example into substrings (usually words)
Recombine substrings into tokens (usually ngrams)
Index tokens (associate a unique int value with each token)
Transform each example using this index, either into a vector of ints or
a dense float vector.


Some notes on passing callables to customize splitting and normalization for
this layer:
Any callable can be passed to this Layer, but if you want to serialize
this object you should only pass functions that are registered Keras
serializables (see keras.saving.register_keras_serializable
for more details).
When using a custom callable for standardize, the data received
by the callable will be exactly as passed to this layer. The callable
should return a tensor of the same shape as the input.
When using a custom callable for split, the data received by the
callable will have the 1st dimension squeezed out - instead of
[[&quot;string to split&quot;], [&quot;another string to split&quot;]], the Callable will
see [&quot;string to split&quot;, &quot;another string to split&quot;].
The callable should return a tf.Tensor of dtype string
with the first dimension containing the split tokens -
in this example, we should see something like [[&quot;string&quot;, &quot;to&quot;, &quot;split&quot;], [&quot;another&quot;, &quot;string&quot;, &quot;to&quot;, &quot;split&quot;]].


Note: This layer uses TensorFlow internally. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.
Note: This layer is safe to use inside a tf.data pipeline
(independently of which backend you're using)."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">keras</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.13.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/tutorial_basic_classification.html">Basic Classification</a>
    <a class="dropdown-item" href="../articles/tutorial_basic_text_classification.html">Text Classification</a>
    <a class="dropdown-item" href="../articles/tutorial_basic_regression.html">Basic Regression</a>
    <a class="dropdown-item" href="../articles/tutorial_overfit_underfit.html">Overfitting and Underfitting</a>
    <a class="dropdown-item" href="../articles/tutorial_save_and_restore.html">Save and Restore Models</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <a class="dropdown-item" href="../writing_your_own_callbacks.html">Writing Your Own Callbacks</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Guides (New for TF 2.6)</h6>
    <a class="dropdown-item" href="../articles/new-guides/python_subclasses.html">Python Subclasses</a>
    <a class="dropdown-item" href="../articles/new-guides/making_new_layers_and_models_via_subclassing.html">Making New Layers and Models via Subclassing</a>
    <a class="dropdown-item" href="../articles/new-guides/customizing_what_happens_in_fit.html">Customizing What Happens in Fit</a>
    <a class="dropdown-item" href="../articles/new-guides/writing_your_own_callbacks.html">Writing Your Own Callbacks</a>
    <a class="dropdown-item" href="../articles/new-guides/preprocessing_layers.html">Working with Preprocessing Layers</a>
    <a class="dropdown-item" href="../argicles/new-guides/working_with_rnns.html">Working with RNNs</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Using Keras</h6>
    <a class="dropdown-item" href="../articles/guide_keras.html">Guide to Keras Basics</a>
    <a class="dropdown-item" href="../articles/sequential_model.html">Sequential Model in Depth</a>
    <a class="dropdown-item" href="../articles/functional_api.html">Functional API in Depth</a>
    <a class="dropdown-item" href="../articles/about_keras_models.html">About Keras Models</a>
    <a class="dropdown-item" href="../articles/about_keras_layers.html">About Keras Layers</a>
    <a class="dropdown-item" href="../articles/training_visualization.html">Training Visualization</a>
    <a class="dropdown-item" href="../articles/applications.html">Pre-Trained Models</a>
    <a class="dropdown-item" href="../articles/faq.html">Frequently Asked Questions</a>
    <a class="dropdown-item" href="../articles/why_use_keras.html">Why Use Keras?</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced</h6>
    <a class="dropdown-item" href="../articles/eager_guide.html">Eager Execution</a>
    <a class="dropdown-item" href="../articles/training_callbacks.html">Training Callbacks</a>
    <a class="dropdown-item" href="../articles/backend.html">Keras Backend</a>
    <a class="dropdown-item" href="../articles/custom_layers.html">Custom Layers</a>
    <a class="dropdown-item" href="../articles/custom_models.html">Custom Models</a>
    <a class="dropdown-item" href="../articles/saving_serializing.html">Saving and serializing</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/learn.html">Learn</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/tools.html">Tools</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/examples/index.html">Examples</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/keras/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A preprocessing layer which maps text features to integer sequences.</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/keras/blob/HEAD/R/autogen-layers-preprocessing.R" class="external-link"><code>R/autogen-layers-preprocessing.R</code></a>, <a href="https://github.com/rstudio/keras/blob/HEAD/R/layer-r-helpers.R" class="external-link"><code>R/layer-r-helpers.R</code></a></small>
      <div class="d-none name"><code>layer_text_vectorization.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This layer has basic options for managing text in a Keras model. It
transforms a batch of strings (one example = one string) into either a list
of token indices (one example = 1D tensor of integer token indices) or a
dense representation (one example = 1D tensor of float values representing
data about the example's tokens). This layer is meant to handle natural
language inputs. To handle simple string inputs (categorical strings or
pre-tokenized strings) see <code>kers_core.layers.StringLookup</code>.</p>
<p>The vocabulary for the layer must be either supplied on construction or
learned via <code><a href="adapt.html">adapt()</a></code>. When this layer is adapted, it will analyze the
dataset, determine the frequency of individual string values, and create a
vocabulary from them. This vocabulary can have unlimited size or be capped,
depending on the configuration options for this layer; if there are more
unique values in the input than the maximum vocabulary size, the most
frequent terms will be used to create the vocabulary.</p>
<p>The processing of each example contains the following steps:</p><ol><li><p>Standardize each example (usually lowercasing + punctuation stripping)</p></li>
<li><p>Split each example into substrings (usually words)</p></li>
<li><p>Recombine substrings into tokens (usually ngrams)</p></li>
<li><p>Index tokens (associate a unique int value with each token)</p></li>
<li><p>Transform each example using this index, either into a vector of ints or
a dense float vector.</p></li>
</ol><p>Some notes on passing callables to customize splitting and normalization for
this layer:</p><ol><li><p>Any callable can be passed to this Layer, but if you want to serialize
this object you should only pass functions that are registered Keras
serializables (see <code>keras.saving.register_keras_serializable</code>
for more details).</p></li>
<li><p>When using a custom callable for <code>standardize</code>, the data received
by the callable will be exactly as passed to this layer. The callable
should return a tensor of the same shape as the input.</p></li>
<li><p>When using a custom callable for <code>split</code>, the data received by the
callable will have the 1st dimension squeezed out - instead of
<code>[["string to split"], ["another string to split"]]</code>, the Callable will
see <code>["string to split", "another string to split"]</code>.
The callable should return a <code>tf.Tensor</code> of dtype <code>string</code>
with the first dimension containing the split tokens -
in this example, we should see something like <code>[["string", "to", "split"], ["another", "string", "to", "split"]]</code>.</p></li>
</ol><p><strong>Note:</strong> This layer uses TensorFlow internally. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.</p>
<p><strong>Note:</strong> This layer is safe to use inside a <code>tf.data</code> pipeline
(independently of which backend you're using).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">layer_text_vectorization</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  max_tokens <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  standardize <span class="op">=</span> <span class="st">"lower_and_strip_punctuation"</span>,</span>
<span>  split <span class="op">=</span> <span class="st">"whitespace"</span>,</span>
<span>  ngrams <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_mode <span class="op">=</span> <span class="st">"int"</span>,</span>
<span>  output_sequence_length <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pad_to_max_tokens <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  vocabulary <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  idf_weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sparse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ragged <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"utf-8"</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_vocabulary</span><span class="op">(</span><span class="va">object</span>, include_special_tokens <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_vocabulary</span><span class="op">(</span><span class="va">object</span>, <span class="va">vocabulary</span>, idf_weights <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>Object to compose the layer with. A tensor, array, or sequential model.</p></dd>


<dt>max_tokens</dt>
<dd><p>Maximum size of the vocabulary for this layer. This should
only be specified when adapting a vocabulary or when setting
<code>pad_to_max_tokens=True</code>. Note that this vocabulary
contains 1 OOV token, so the effective number of tokens is
<code>(max_tokens - 1 - (1 if output_mode == "int" else 0))</code>.</p></dd>


<dt>standardize</dt>
<dd><p>Optional specification for standardization to apply to the
input text. Values can be:
- <code>None</code>: No standardization.
- <code>"lower_and_strip_punctuation"</code>: Text will be lowercased and all
punctuation removed.
- <code>"lower"</code>: Text will be lowercased.
- <code>"strip_punctuation"</code>: All punctuation will be removed.
- Callable: Inputs will passed to the callable function,
which should be standardized and returned.</p></dd>


<dt>split</dt>
<dd><p>Optional specification for splitting the input text.
Values can be:
- <code>None</code>: No splitting.
- <code>"whitespace"</code>: Split on whitespace.
- <code>"character"</code>: Split on each unicode character.
- Callable: Standardized inputs will passed to the callable
function, which should be split and returned.</p></dd>


<dt>ngrams</dt>
<dd><p>Optional specification for ngrams to create from the
possibly-split input text. Values can be <code>None</code>, an integer
or tuple of integers; passing an integer will create ngrams
up to that integer, and passing a tuple of integers will
create ngrams for the specified values in the tuple.
Passing <code>None</code> means that no ngrams will be created.</p></dd>


<dt>output_mode</dt>
<dd><p>Optional specification for the output of the layer.
Values can be <code>"int"</code>, <code>"multi_hot"</code>, <code>"count"</code> or <code>"tf_idf"</code>,
configuring the layer as follows:
- <code>"int"</code>: Outputs integer indices, one integer index per split
string token. When <code>output_mode == "int"</code>,
0 is reserved for masked locations;
this reduces the vocab size to <code>max_tokens - 2</code>
instead of <code>max_tokens - 1</code>.
- <code>"multi_hot"</code>: Outputs a single int array per batch, of either
vocab_size or max_tokens size, containing 1s in all elements
where the token mapped to that index exists at least
once in the batch item.
- <code>"count"</code>: Like <code>"multi_hot"</code>, but the int array contains
a count of the number of times the token at that index
appeared in the batch item.
- <code>"tf_idf"</code>: Like <code>"multi_hot"</code>, but the TF-IDF algorithm
is applied to find the value in each token slot.
For <code>"int"</code> output, any shape of input and output is supported.
For all other output modes, currently only rank 1 inputs
(and rank 2 outputs after splitting) are supported.</p></dd>


<dt>output_sequence_length</dt>
<dd><p>Only valid in INT mode. If set, the output will
have its time dimension padded or truncated to exactly
<code>output_sequence_length</code> values, resulting in a tensor of shape
<code>(batch_size, output_sequence_length)</code> regardless of how many tokens
resulted from the splitting step. Defaults to <code>None</code>.</p></dd>


<dt>pad_to_max_tokens</dt>
<dd><p>Only valid in  <code>"multi_hot"</code>, <code>"count"</code>,
and <code>"tf_idf"</code> modes. If <code>True</code>, the output will have
its feature axis padded to <code>max_tokens</code> even if the number
of unique tokens in the vocabulary is less than <code>max_tokens</code>,
resulting in a tensor of shape <code>(batch_size, max_tokens)</code>
regardless of vocabulary size. Defaults to <code>False</code>.</p></dd>


<dt>vocabulary</dt>
<dd><p>Optional. Either an array of strings or a string path to a
text file. If passing an array, can pass a tuple, list,
1D NumPy array, or 1D tensor containing the string vocabulary terms.
If passing a file path, the file should contain one line per term
in the vocabulary. If this argument is set,
there is no need to <code><a href="adapt.html">adapt()</a></code> the layer.</p></dd>


<dt>idf_weights</dt>
<dd><p>An R vector, 1D numpy array, or 1D tensor of inverse
document frequency weights with equal length to vocabulary. Must be set if
output_mode is "tf_idf". Should not be set otherwise.</p></dd>


<dt>sparse</dt>
<dd><p>Boolean. Only applicable to <code>"multi_hot"</code>, <code>"count"</code>, and
<code>"tf_idf"</code> output modes. Only supported with TensorFlow
backend. If <code>True</code>, returns a <code>SparseTensor</code>
instead of a dense <code>Tensor</code>. Defaults to <code>False</code>.</p></dd>


<dt>ragged</dt>
<dd><p>Boolean. Only applicable to <code>"int"</code> output mode.
Only supported with TensorFlow backend.
If <code>True</code>, returns a <code>RaggedTensor</code> instead of a dense <code>Tensor</code>,
where each sequence may have a different length
after string splitting. Defaults to <code>False</code>.</p></dd>


<dt>encoding</dt>
<dd><p>Optional. The text encoding to use to interpret the input
strings. Defaults to <code>"utf-8"</code>.</p></dd>


<dt>name</dt>
<dd><p>String, name for the object</p></dd>


<dt>...</dt>
<dd><p>Passed on to the Python callable</p></dd>


<dt>include_special_tokens</dt>
<dd><p>If True, the returned vocabulary will include
the padding and OOV tokens, and a term's index in the vocabulary will equal
the term's index when calling the layer. If False, the returned vocabulary
will not include any padding or OOV tokens.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    <p>This example instantiates a <code>TextVectorization</code> layer that lowercases text,
splits on whitespace, strips punctuation, and outputs integer vocab indices.</p>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>max_tokens <span class="op">=</span> <span class="dv">5000</span>  <span class="co"># Maximum vocab size.</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>max_len <span class="op">=</span> <span class="dv">4</span>  <span class="co"># Sequence length to pad the outputs to.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># Create the layer.</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>vectorize_layer <span class="op">=</span> TextVectorization(</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    output_mode<span class="op">=</span><span class="st">'int'</span>,</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    output_sequence_length<span class="op">=</span>max_len)</span></code></pre><p></p></div>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Now that the vocab layer has been created, call `adapt` on the</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># list of strings to create the vocabulary.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>vectorize_layer.adapt([<span class="st">"foo bar"</span>, <span class="st">"bar baz"</span>, <span class="st">"baz bada boom"</span>])</span></code></pre><p></p></div>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Now, the layer can map strings to integers -- you can use an</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># embedding layer to map these integers to learned embeddings.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>input_data <span class="op">=</span> [[<span class="st">"foo qux bar"</span>], [<span class="st">"qux baz"</span>]]</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>vectorize_layer(input_data)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># array([[4, 1, 3, 0],</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#        [1, 2, 0, 0]])</span></span></code></pre><p></p></div>
<p>This example instantiates a <code>TextVectorization</code> layer by passing a list
of vocabulary terms to the layer's <code>__init__()</code> method.</p>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>vocab_data <span class="op">=</span> [<span class="st">"earth"</span>, <span class="st">"wind"</span>, <span class="st">"and"</span>, <span class="st">"fire"</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>max_len <span class="op">=</span> <span class="dv">4</span>  <span class="co"># Sequence length to pad the outputs to.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># Create the layer, passing the vocab directly. You can also pass the</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># vocabulary arg a path to a file containing one vocabulary word per</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># line.</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>vectorize_layer <span class="op">=</span> keras.layers.TextVectorization(</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    max_tokens<span class="op">=</span>max_tokens,</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    output_mode<span class="op">=</span><span class="st">'int'</span>,</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    output_sequence_length<span class="op">=</span>max_len,</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    vocabulary<span class="op">=</span>vocab_data)</span></code></pre><p></p></div>
<p></p><div class="sourceCode python"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Because we've passed the vocabulary directly, we don't need to adapt</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># the layer - the vocabulary is already set. The vocabulary contains the</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># padding token ('') and OOV token ('[UNK]')</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># as well as the passed tokens.</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>vectorize_layer.get_vocabulary()</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># ['', '[UNK]', 'earth', 'wind', 'and', 'fire']</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><a href="https:/keras.io/api/layers/preprocessing_layers/text/text_vectorization#textvectorization-class">https:/keras.io/api/layers/preprocessing_layers/text/text_vectorization#textvectorization-class</a></p></li>
<li><p><a href="https://www.tensorflow.org/api_docs/python/tf/keras/layers/TextVectorization" class="external-link">https://www.tensorflow.org/api_docs/python/tf/keras/layers/TextVectorization</a></p></li>
</ul><p>Other preprocessing layers: 
<code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code>,
<code><a href="layer_center_crop.html">layer_center_crop</a>()</code>,
<code><a href="layer_discretization.html">layer_discretization</a>()</code>,
<code><a href="layer_feature_space.html">layer_feature_space</a>()</code>,
<code><a href="layer_hashed_crossing.html">layer_hashed_crossing</a>()</code>,
<code><a href="layer_hashing.html">layer_hashing</a>()</code>,
<code><a href="layer_integer_lookup.html">layer_integer_lookup</a>()</code>,
<code><a href="layer_normalization.html">layer_normalization</a>()</code>,
<code><a href="layer_random_brightness.html">layer_random_brightness</a>()</code>,
<code><a href="layer_random_contrast.html">layer_random_contrast</a>()</code>,
<code><a href="layer_random_crop.html">layer_random_crop</a>()</code>,
<code><a href="layer_random_flip.html">layer_random_flip</a>()</code>,
<code><a href="layer_random_rotation.html">layer_random_rotation</a>()</code>,
<code><a href="layer_random_translation.html">layer_random_translation</a>()</code>,
<code><a href="layer_random_zoom.html">layer_random_zoom</a>()</code>,
<code><a href="layer_rescaling.html">layer_rescaling</a>()</code>,
<code><a href="layer_resizing.html">layer_resizing</a>()</code>,
<code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tomasz Kalinowski, JJ Allaire, François Chollet, RStudio, Google.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

